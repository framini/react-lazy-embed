(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1237:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(438);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1261)],module)}.call(this,__webpack_require__(1238)(module))},1261:function(module,exports,__webpack_require__){var map={"./lazy-embed.stories.tsx":1267};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1261},1267:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"responsiveIframe",(function(){return responsiveIframe}));var io,tslib_es6=__webpack_require__(137),react=__webpack_require__(0),react_default=__webpack_require__.n(react),isBrowser="undefined"!=typeof window,hasIOSupport=isBrowser&&window.IntersectionObserver,listeners=new WeakMap,preconnections=[],listenToIntersections=function(el,cb){if(null!==el){var observer=(void 0===io&&"undefined"!=typeof window&&window.IntersectionObserver&&(io=new window.IntersectionObserver((function(entries){entries.forEach((function(entry){if(listeners.has(entry.target)){var cb=listeners.get(entry.target);(entry.isIntersecting||entry.intersectionRatio>0)&&(io.unobserve(entry.target),listeners.delete(entry.target),cb())}}))}),{rootMargin:"200px"})),io);return observer&&(observer.observe(el),listeners.set(el,cb)),function(){observer.unobserve(el),listeners.delete(el)}}},addPrefetch=function(kind,url,as){void 0===as&&(as="");var id=kind+"-"+url+"-"+as;if(!preconnections.includes(id)){preconnections.push(id);var linkElem=document.createElement("link");linkElem.rel=kind,linkElem.href=url,as&&(linkElem.as=as),linkElem.crossOrigin="true",document.head.append(linkElem)}},getIframeProps=function(props){return"youtube"===props.provider?{frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,src:"https://www.youtube-nocookie.com/embed/"+props.id}:{frameBorder:"",allow:"",allowFullScreen:!0,src:""}},noscriptImg=function(props){if("youtube"===props.provider){var embedProps=getIframeProps({id:props.id,provider:props.provider});return'<iframe frameborder="'+embedProps.frameBorder+'" allow="'+embedProps.allow+'" allowfullscreen="'+embedProps.allowFullScreen+'" src="'+embedProps.src+'"></iframe>'}return""},LazyEmbed=function(_a){var id=_a.id,children=_a.children,_b=_a.provider,provider=void 0===_b?"youtube":_b,elRef=react_default.a.useRef(null),_c=react_default.a.useState(!1),shouldPreconnect=_c[0],setShouldPreconnect=_c[1],preconnectedRef=react_default.a.useRef(!1),_d=function(){var _a=react_default.a.useState(!0),firstLoad=_a[0],setFirstLoad=_a[1],useIOSupport=hasIOSupport,initialStatus=!firstLoad&&!useIOSupport?"visible":"idle",_b=react_default.a.useState(initialStatus),status=_b[0],setStatus=_b[1];return react_default.a.useEffect((function(){setFirstLoad(!1)}),[]),{status:status,useIOSupport:useIOSupport,setStatus:setStatus}}(),status=_d.status,useIOSupport=_d.useIOSupport,setStatus=_d.setStatus,onActivate=react_default.a.useCallback((function(){setStatus("load")}),[]);react_default.a.useEffect((function(){if(useIOSupport){var cleanupListeners_1=listenToIntersections(elRef.current,(function(){setStatus("visible")}));return function(){cleanupListeners_1&&cleanupListeners_1()}}}),[setStatus,useIOSupport]),react_default.a.useEffect((function(){shouldPreconnect&&!preconnectedRef.current&&"youtube"===provider&&(addPrefetch("preconnect","https://www.youtube-nocookie.com"),addPrefetch("preconnect","https://www.google.com"),preconnectedRef.current=!0)}),[shouldPreconnect,provider]);var onIframeLoad=react_default.a.useCallback((function(){setStatus("loaded")}),[]),iframeProps=react_default.a.useMemo((function(){return Object(tslib_es6.a)(Object(tslib_es6.a)({},getIframeProps({provider:provider,id:id})),{onLoad:onIframeLoad})}),[id,provider]),thumbnailProps=react_default.a.useMemo((function(){return function(_a){var provider=_a.provider,id=_a.id;if("youtube"===provider)return{webp:"https://i.ytimg.com/vi_webp/"+id+"/hqdefault.webp",jpg:"https://i.ytimg.com/vi/"+id+"/hqdefault.jpg"};throw Error("getThumbnails wrong provider")}({provider:provider,id:id})}),[provider,id]);return react_default.a.createElement("div",{ref:elRef,onPointerOver:function(){"loaded"===status||preconnectedRef.current||setShouldPreconnect(!0)}},children({status:status,onActivate:onActivate,iframe:iframeProps,thumbnail:thumbnailProps}),react_default.a.createElement("noscript",{dangerouslySetInnerHTML:{__html:noscriptImg({id:id,provider:provider})}}))};try{LazyEmbed.displayName="LazyEmbed",LazyEmbed.__docgenInfo={description:"",displayName:"LazyEmbed",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},provider:{defaultValue:{value:"youtube"},description:"",name:"provider",required:!1,type:{name:'"youtube"'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.tsx#LazyEmbed"]={docgenInfo:LazyEmbed.__docgenInfo,name:"LazyEmbed",path:"src/index.tsx#LazyEmbed"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(424).withSource;var addSourceDecorator=__webpack_require__(424).addSource,responsiveIframe=(__webpack_exports__.default={parameters:{storySource:{source:"import React from 'react';\n\nimport { LazyEmbed } from '../src';\n\nexport default {\n  title: 'Lazy Embed',\n};\n\nexport const responsiveIframe = () => (\n  <div>\n    <div\n      style={{\n        height: '200vh',\n        width: '600px',\n        marginBottom: '20px',\n        background: '#2196f3',\n      }}\n    ></div>\n    <div style={{ width: '600px' }}>\n      <LazyEmbed id={'TWqFbKpV5Oc'}>\n        {({ status, onActivate, iframe, thumbnail }) => {\n          const showThumb = status === 'visible' || status === 'load';\n          const showIframe = status === 'load' || status === 'loaded';\n\n          return (\n            <div\n              style={\n                showThumb\n                  ? {\n                      position: 'relative',\n                      overflow: 'hidden',\n                      display: 'flex',\n                      justifyContent: 'center',\n                    }\n                  : {}\n              }\n            >\n              {showThumb && (\n                <>\n                  <picture>\n                    <source srcSet={thumbnail.webp} type=\"image/webp\" />\n                    <img src={thumbnail.jpg} />\n                  </picture>\n\n                  <div\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      backgroundColor: 'rgba(33, 150, 243, 0.25)',\n                    }}\n                  >\n                    {status === 'load' ? (\n                      <span>Loading</span>\n                    ) : (\n                      <button onClick={onActivate}>Load</button>\n                    )}\n                  </div>\n                </>\n              )}\n\n              {showIframe && (\n                <div\n                  style={{\n                    position: 'relative',\n                    paddingBottom: '56.25%' /* 16:9 */,\n                    paddingTop: 25,\n                    height: 0,\n                  }}\n                >\n                  <iframe\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                    }}\n                    {...iframe}\n                  />\n                </div>\n              )}\n            </div>\n          );\n        }}\n      </LazyEmbed>\n    </div>\n  </div>\n);\n",locationsMap:{"lazy-embed--responsive-iframe":{startLoc:{col:32,line:9},endLoc:{col:1,line:94},startBody:{col:32,line:9},endBody:{col:1,line:94}}}}},title:"Lazy Embed"},addSourceDecorator((function(){return react_default.a.createElement("div",null,react_default.a.createElement("div",{style:{height:"200vh",width:"600px",marginBottom:"20px",background:"#2196f3"}}),react_default.a.createElement("div",{style:{width:"600px"}},react_default.a.createElement(LazyEmbed,{id:"TWqFbKpV5Oc"},(function(_a){var status=_a.status,onActivate=_a.onActivate,iframe=_a.iframe,thumbnail=_a.thumbnail,showThumb="visible"===status||"load"===status,showIframe="load"===status||"loaded"===status;return react_default.a.createElement("div",{style:showThumb?{position:"relative",overflow:"hidden",display:"flex",justifyContent:"center"}:{}},showThumb&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("picture",null,react_default.a.createElement("source",{srcSet:thumbnail.webp,type:"image/webp"}),react_default.a.createElement("img",{src:thumbnail.jpg})),react_default.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(33, 150, 243, 0.25)"}},"load"===status?react_default.a.createElement("span",null,"Loading"):react_default.a.createElement("button",{onClick:onActivate},"Load"))),showIframe&&react_default.a.createElement("div",{style:{position:"relative",paddingBottom:"56.25%",paddingTop:25,height:0}},react_default.a.createElement("iframe",Object(tslib_es6.a)({style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},iframe))))}))))}),{__STORY__:"import React from 'react';\n\nimport { LazyEmbed } from '../src';\n\nexport default {\n  title: 'Lazy Embed',\n};\n\nexport const responsiveIframe = () => (\n  <div>\n    <div\n      style={{\n        height: '200vh',\n        width: '600px',\n        marginBottom: '20px',\n        background: '#2196f3',\n      }}\n    ></div>\n    <div style={{ width: '600px' }}>\n      <LazyEmbed id={'TWqFbKpV5Oc'}>\n        {({ status, onActivate, iframe, thumbnail }) => {\n          const showThumb = status === 'visible' || status === 'load';\n          const showIframe = status === 'load' || status === 'loaded';\n\n          return (\n            <div\n              style={\n                showThumb\n                  ? {\n                      position: 'relative',\n                      overflow: 'hidden',\n                      display: 'flex',\n                      justifyContent: 'center',\n                    }\n                  : {}\n              }\n            >\n              {showThumb && (\n                <>\n                  <picture>\n                    <source srcSet={thumbnail.webp} type=\"image/webp\" />\n                    <img src={thumbnail.jpg} />\n                  </picture>\n\n                  <div\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      backgroundColor: 'rgba(33, 150, 243, 0.25)',\n                    }}\n                  >\n                    {status === 'load' ? (\n                      <span>Loading</span>\n                    ) : (\n                      <button onClick={onActivate}>Load</button>\n                    )}\n                  </div>\n                </>\n              )}\n\n              {showIframe && (\n                <div\n                  style={{\n                    position: 'relative',\n                    paddingBottom: '56.25%' /* 16:9 */,\n                    paddingTop: 25,\n                    height: 0,\n                  }}\n                >\n                  <iframe\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                    }}\n                    {...iframe}\n                  />\n                </div>\n              )}\n            </div>\n          );\n        }}\n      </LazyEmbed>\n    </div>\n  </div>\n);\n",__ADDS_MAP__:{"lazy-embed--responsive-iframe":{startLoc:{col:32,line:9},endLoc:{col:1,line:94},startBody:{col:32,line:9},endBody:{col:1,line:94}}},__MAIN_FILE_LOCATION__:"/lazy-embed.stories.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/runner/work/react-lazy-embed/react-lazy-embed/stories",__IDS_TO_FRAMEWORKS__:{}}))},439:function(module,exports,__webpack_require__){__webpack_require__(440),__webpack_require__(583),__webpack_require__(584),__webpack_require__(1236),module.exports=__webpack_require__(1237)},502:function(module,exports){}},[[439,1,2]]]);
//# sourceMappingURL=main.f97ae14835f824262a87.bundle.js.map